{% extends 'page_base.html' %}
{% block title %}
Formulario de evento
{% endblock %}
{% block main %}
    <section class="admin-section">
        <h1>Gesti√≥n del sitio</h1>
        <h2>Formulario de evento</h2>

        <form class="event-form" action="event-form.php" method="post">
            <span class="event-form-input">
                T√≠tulo de evento: <input type="text" name="title" value="{{event.title}}" />
            </span>
            <span class="event-form-input">
                Autor: <input type="text" name="author" value="{{event.author}}" />
            </span>
            <input class="hidden-field" type="text" name="id" value="{{event.id}}" />
            <input class="hidden-field" type="text" name="type" value="event" />
            {% if event %}
                <span class="event-form-input">
                    Tags:
                    <div class="edit-tags-wrapper">
                        <span id="new-tag-button" class="tag">A√±adir</span>
                        {% for tag in event.tags %}
                            <span class="tag tag-button">{{ tag.tag }}<span class="tag-delete" tagId="{{tag.id}}">üóëÔ∏è</span></span>
                        {% endfor %}
                    </div>
                </span>
            {% endif %}
            <textarea id="event-form-body" name="body" rows="16" body="{{ event.body }}" eventid="{{ event.id }}"></textarea>
            <span>Creado el: {{ event.created_at | date("d/m/Y") }}, √öltima actualizaci√≥n: {{ event.updated_at | date("d/m/Y") }}</span>
            <input class="save-event-button" type="submit" value="Guardar evento" />
        </form>
        {% if event %}
            <h2>Galer√≠a de fotos del evento</h2>
            {% for e in errors %}
                <h4 class="error">{{ e }}</h4>
            {% endfor %}
            <form action="event-form.php" method="post" enctype="multipart/form-data">
                <input class="hidden-field" type="text" name="id" value="{{event.id}}" />
                <input class="hidden-field" type="text" name="type" value="image" />
                Imagen a subir: <input type="file" name="image" /><br>
                <input type="submit" value="A√±adir imagen" />
            </form>
            <div class="edit-gallery">
                {% for gallery_image in event.gallery %}
                <span id="{{gallery_image.image_url}}" class="image-edit-wrapper">
                    <span class="image-delete" eventId="{{event.id}}" imageUrl="{{gallery_image.image_url}}">üóëÔ∏è</span>
                    <img class="gallery-image-edit" src="{{gallery_image.image_url}}" />
                </span>
                {% endfor %}
            </div>
        {% else %}
            <div class="new-event-advice">
                <h2>Cree su evento para poder a√±adir fotos y etiquetas</h2>
            </div>
        {% endif %}
    </section>
    <script src="/assets/scripts/gestion.js"></script>
{% endblock %}